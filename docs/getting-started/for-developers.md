# Getting Started for Developers

<!--
Copyright 2023-2026 Playlab/ACAL

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->


---

- Author: Jen-Chien Chang \<jenchien@twhpcedu.org\>
- Date: 2024/08/05

([Back To Documentation Portal](/docs/README.md))

## Configuring Debugging Messages For Simulation

There are three logging modes designed to either provide detailed information about the internal status of ACALSim or disable all logs to measure framework efficiency. With our [top-level makefile](/makefile), developers can enable the options by appending them to the compilation commands.

- `ACALSIM_VERBOSE`: Enables basic logging messages generated internally by ACALSim.

    ```shell
    make debug TARGET=<TARGET_NAME> ACALSIM_VERBOSE=ON
    ```

- `MT_DEBUG`: Enables logging messages specifically for debugging multi-threading issues.

    ```shell
    make debug TARGET=<TARGET_NAME> MT_DEBUG=ON
    ```

- `NO_LOGS`: Disables all logs generated by logging macros. Use this option only for evaluating simulation speed.

    ```shell
    make debug TARGET=<TARGET_NAME> NO_LOGS=ON
    ```

## Linter and Formatter

We use several tools to ensure syntax correctness and maintain a consistent coding style. These tools are integrated into the pre-commit hooks. They are executed automatically before a commit is made. Developers can also manually run all the tools with the following command:

```shell
cd /path/to/acalsim
make pre-commit
```

For more information, please refer to the [official document](https://pre-commit.com/).

## Regression Test

Our regression tests compile and execute several example simulators to ensure that internal changes to ACALSim do not compromise the functionality or availability of user applications.

```shell
cd /path/to/acalsim
make regression
```

# Raw CMake Commands

It is generally recommended to use the [top-level makefile](./makefile) for compilation, as it provides more concise commands. However, in some cases, you may prefer to use raw CMake commands to configure the compilation process in more detail.

Below are examples that illustrate the equivalent CMake commands for the corresponding makefile commands.

- Compile a CMake target with debug mode.

    ```shell
    ## Top-level makefile command
    make debug TARGET=ProjectTemplate

    ## Equivalent CMake commands
    cmake -B build/debug/ \
        -DCMAKE_BUILD_TYPE=Debug \
        -DBUILD_SHARED_LIBS=ON \
        -DACALSIM_VERBOSE=OFF \
        -DMT_DEBUG=OFF \
        -DNO_LOGS=OFF
    cmake --build build/debug/ -j $(nproc) --target ProjectTemplate
    ```

- Compile a CMake target with debug mode and enable the `ACALSIM_VERBOSE` option.

    ```shell
    ## Top-level makefile command
    make debug TARGET=ProjectTemplate ACALSIM_VERBOSE=ON

    ## Equivalent CMake commands
    cmake -B build/debug/ \
        -DCMAKE_BUILD_TYPE=Debug \
        -DBUILD_SHARED_LIBS=ON \
        -DACALSIM_VERBOSE=ON \
        -DMT_DEBUG=OFF \
        -DNO_LOGS=OFF
    cmake --build build/debug/ -j $(nproc) --target ProjectTemplate
    ```

There are also several subcommands designed to assist developers in managing the repository:

- `make init`: Reinitializes all submodules to ensure they match the correct versions and sets up pre-commit hooks. This command also implicitly runs `make clean`.
- `make clean`: Removes all built binary and executable files.

---

([Back To Documentation Portal](/docs/README.md))
